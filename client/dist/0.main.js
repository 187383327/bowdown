(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,n,t){"use strict";t.r(n);var o=t(2),i=new(t(4).a),a=t(5),c=t.n(a),r=t(6),s=t.n(r),d=t(7),l=t.n(d),u=t(8),p=t.n(u),w=t(9),m=t.n(w),b=t(10),y=t.n(b),g=t(11),v=t.n(g),h=new o.fb,f=[];i.load(c.a,function(e){var n=e.scene;n.position.y-=10,h.add(n),f.push(n)});let x=[];x.push(new o.M({map:(new o.lb).load(s.a)})),x.push(new o.M({map:(new o.lb).load(l.a)})),x.push(new o.M({map:(new o.lb).load(p.a)})),x.push(new o.M({map:(new o.lb).load(m.a)})),x.push(new o.M({map:(new o.lb).load(y.a)})),x.push(new o.M({map:(new o.lb).load(v.a)}));for(let e=0;e<6;e++)x[e].side=o.c;let z=new o.e(1e3,1e3,1e3),M=new o.L(z,x);var S;h.add(M),h.add(((S=new o.r(16777215,10209703)).color.setHSL(.6,1,.8),S.groundColor.setHSL(.095,1,.75),S.position.set(0,50,0),S.visible=!0,S)),h.add(function(){var e=new o.l;e.color.setHSL(.1,1,.95),e.position.set(-1,1.75,1),e.position.multiplyScalar(30),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048;return e.shadow.camera.left=-50,e.shadow.camera.right=50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,e.shadow.camera.far=3500,e.shadow.bias=-1e-4,e.visible=!0,e}());var k=new o.tb({antialias:!0,alpha:!0});function q(e,n){var t;return e.forEach(e=>{e.name!==n||(t=e)}),t}function A(e,n){n.mixer=e,n.anim={idle:e.clipAction(q(n.animations,"Idle")),running:e.clipAction(q(n.animations,"Running2")),runWithBow:e.clipAction(q(n.animations,"Run with bow")),runWithLegsOnly:e.clipAction(q(n.animations,"Running legs only")),jumping:e.clipAction(q(n.animations,"Jumping")).setLoop(o.H),equipBow:e.clipAction(q(n.animations,"Equip Bow")).setLoop(o.H),drawBow:e.clipAction(q(n.animations,"Draw bow")).setLoop(o.H),fireBow:e.clipAction(q(n.animations,"Fire bow")).setLoop(o.H)},n.anim.drawBow.clampWhenFinished=!0,n.toggleBow=function(e){n.scene.children[0].children[1].visible=!e,n.scene.children[0].children[2].visible=e},n.bowAction=function(e){n.anim&&n.anim[e]?n.activeBowAction!=e&&(n.activeBowAction&&n.anim[n.activeBowAction].stop(),n.activeMovement&&"runWithLegsOnly"!=n.activeMovement&&n.anim[n.activeMovement].stop(),e&&n.anim[e].reset().play(),n.activeBowAction=e):console.error("action: "+e+" does not exist!")},n.movementAction=function(e="idle"){if(n.anim&&n.anim[e]){if(n.activeMovement){if(n.activeMovement==e)return;n.anim[n.activeMovement].stop()}n.anim[e].reset().play(),n.activeMovement=e}else console.error("action: "+e+" does not exist!")},n.isRunning=function(){return!!n.activeMovement&&n.activeMovement.toLowerCase().includes("run")},n.isFiring=function(){return n.bowState&&("drawn"==n.bowState||"drawing"==n.bowState||"firing"==n.bowState)}}k.setClearColor("#e5e5e5"),screen.width<screen.height?k.setSize(window.innerHeight,window.innerWidth,!1):k.setSize(window.innerWidth,window.innerHeight,!1),k.setPixelRatio(window.devicePixelRatio),k.gammaOutput=!0,k.gammaFactor=2.2;var L=t(3),B=t.n(L);const F=new WebSocket("ws://ec2-18-191-136-250.us-east-2.compute.amazonaws.com:18181");function W(e){F.readyState&&F.send(JSON.stringify(e))}F.onopen=function(){W({message:"sup fucker"})},F.onmessage=function(e){var n,t;if((e=JSON.parse(e.data)).players&&E.init(e.players),e.player){var i=e.player;i==J?e.damage&&I.takeDamage(e.damage):e.chatMessage?function(e){var n=document.createTextNode(e),t=document.createElement("p").appendChild(n);document.getElementById("chat").appendChild(t)}(e.chatMessage):E.get(i)?"disconnected"===e.status?(h.remove(E.get(i).scene),E.get(i)):E.get(i).scene&&null!=e.x&&null!=e.y&&null!=e.z&&null!=e.rotation&&E.move(i,new o.qb(e.x,e.y,e.z),e.rotation,e.movementAction,e.bowAction):E.add(i,new o.qb(e.x,e.y,e.z))}else e.arrow&&(n=e.arrow,(t=P(n.origin,n.rotation)).velocity=new o.qb(n.velocity.x,n.velocity.y,n.velocity.z),C.push(t),Y(t,(Date.now()-n.timeOfShoot)/1e3))};var E={},O={},j=[];E.all=function(){return O},E.get=e=>O[e],E.add=function(e,n){O[e]="loading",i.load(B.a,function(t){O[e]=t,A(new o.b(t.scene),t),n&&E.move(e,n,0),h.add(t.scene);var i=new o.L(new o.e(.5,2,.5));i.position.y+=1,i.material.visible=!1,t.scene.add(i),i.playerUuid=e,j.push(i)})},E.init=function(e){Object.keys(e).forEach(n=>{E.add(n,new o.qb(e[n].x,e[n].y,e[n].z))})},E.move=function(e,n,t,o,i){var a=O[e];a.scene.position.copy(n),a.scene.rotation.y=t,o&&a.movementAction(o),i&&a.bowAction(i)};var H=[],C=[],D=.06,R=.75;function P(e,n){var t=new o.e(D,D,R),i=new o.M({color:65280}),a=new o.L(t,i);return a.origin=e,a.position.copy(e),a.rotation.copy(n),h.add(a),a}function Y(e,n){e.velocity.y-=9*n,e.position.add(e.velocity.clone().multiplyScalar(n))}function X(e){H.forEach(n=>{if(!n.stopped){!function(e){(e.position.x>500||e.position.x<-500||e.position.y>500||e.position.y<-500||e.position.z>500||e.position.z<-500)&&(e.stopped=!0)}(n),Y(n,e);var t=new o.qb(0,0,1);t.applyEuler(n.rotation).normalize();var i=n.position.clone().sub(n.origin).length()/2,a=new o.db(n.position,t,0,i),c=a.intersectObjects(j);if(c.length>0){var r=c.pop();n.position.copy(r.point),n.stopped=!0,function(e){W({player:e,damage:100})}(r.object.playerUuid)}(c=a.intersectObjects(f,!0)).length>0&&(n.position.copy(c.pop().point),n.stopped=!0)}}),C.forEach(n=>{Y(n,e)})}var I,T,J="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)});const U=.12;i.load(B.a,e=>{(I=e).velocity=new o.qb,I.bowState="unequipped",h.add(e.scene),A(T=new o.b(e.scene),I),T.addEventListener("finished",e=>{"Draw bow"==e.action.getClip().name?I.bowState="drawn":("Fire bow"==e.action.getClip().name&&(I.bowState="equipped"),I.moveAction("idle"))}),I.falling=function(e){if(e){var n=I.scene.position.clone().add(I.velocity.clone().multiplyScalar(e));n.y-=.1;var t=new o.qb(0,1,0),i=new o.db(n,t,0,.2+Math.abs(I.velocity.y*e)).intersectObjects(f,!0);return!(i.length>0)||(I.scene.position.copy(i[i.length-1].point),!1)}};I.collisionDetected=function(e){for(var n=-1;n<=1;n++)for(var t=-1;t<=1;t++){n*=.5,t*=.5;var i=new o.qb(n,1,t);i=i.clone().normalize();var a=new o.db(new o.qb(e.x,e.y,e.z),i,0,i.length()).intersectObjects(f,!0);if(a.length>0&&a[0].distance<=new o.y(new o.qb,i).distance())return!0}return!1},I.moveAction=function(e){I.movementAction(e),I.broadcast()},I.playBowAction=function(e){I.isRunning()&&"runWithLegsOnly"!=I.activeMovement?I.moveAction("runWithLegsOnly"):I.activeMovement&&(I.anim[I.activeMovement].stop(),I.activeMovement=null),I.bowAction(e),I.broadcast()},I.onMouseDown=function(){"unequipped"==I.bowState?I.equipBow():(I.playBowAction("drawBow"),I.bowState="drawing",G.zoomIn())},I.onMouseUp=function(){"drawn"==I.bowState?(I.playBowAction("fireBow"),I.anim.drawBow.stop(),function(){var e=I.scene.position.clone().add(new o.qb(0,1.5,0)),n=P(e,G.rotation),t=new o.db;t.setFromCamera({x:0,y:0},G);var i,a=t.intersectObjects(f.concat(j),!0);a.length>0?i=a[0].point.sub(e):(i=new o.qb,G.getWorldDirection(i)),n.velocity=i.normalize().multiplyScalar(60),H.push(n),W({arrow:{origin:n.position,rotation:n.rotation,velocity:n.velocity,timeOfShoot:Date.now()}})}(),I.bowState="firing",G.zoomOut()):"drawing"===I.bowState&&(I.anim.drawBow.stop(),I.anim[I.activeBowAction].stop(),I.activeBowAction=null,I.bowState="equipped",I.moveAction("idle"),G.zoomOut())},I.broadcast=async function(){W({player:J,x:I.scene.position.x,y:I.scene.position.y,z:I.scene.position.z,rotation:I.scene.rotation.y,movementAction:I.activeMovement,bowAction:I.activeBowAction,bowState:I.bowState})},I.move=function(e,n=I.scene.rotation.y){if(I.collisionDetected(e))I.velocity.set(0,0,0);else{if(I.scene.position.copy(e),I.isFiring()){var t=new o.qb;G.getWorldDirection(t),n=Math.atan2(t.x,t.z)}I.scene.rotation.y=n,G.updateCamera(),I.broadcast()}},I.animate=function(e,n){var t;if(I.falling(e))I.velocity.y-=10*e;else{var i=function(e){var n=new o.qb;G.getWorldDirection(n),(n=new o.pb(n.x,n.z)).normalize().multiplyScalar(U);var t=0,i=0;if(0!=e.touch.x&&0!=e.touch.y){var a=new o.pb(e.touch.x,e.touch.y).normalize();t=a.x,i=a.y}return e.keyboard.forward&&(t+=0,i+=1),e.keyboard.backward&&(t+=0,i+=-1),e.keyboard.left&&(t+=-1,i+=0),e.keyboard.right&&(t+=1,i+=0),n.rotateAround(new o.pb,Math.atan2(t,i))}(n),a=Math.atan2(i.x,i.y);if(n.keyboard.space?(I.velocity.y=5,I.moveAction("jumping",a)):I.velocity.set(0,0,0),0!=n.touch.x&&0!=n.touch.y||n.keyboard.forward||n.keyboard.backward||n.keyboard.left||n.keyboard.right)if(n.keyboard.space)I.velocity.x=i.x/e,I.velocity.z=i.y/e;else{(t=I.scene.position.clone()).z+=i.y,t.x+=i.x;var c=new o.qb(t.x,t.y+1,t.z),r=new o.db(c,new o.qb(0,-1,0),0,1).intersectObjects(f,!0);r.length>0&&(t.y=r[0].point.y+.01),I.isRunning()||("equipped"==I.bowState?I.moveAction("runWithBow"):I.isFiring()?I.moveAction("runWithLegsOnly"):I.moveAction("running"))}else if(I.isRunning()&&I.moveAction("idle"),I.isFiring()){i=new o.qb;G.getWorldDirection(i),a=Math.atan2(i.x,i.z),I.scene.rotation.y=a,G.updateCamera(),I.broadcast()}}(t||I.velocity.x||I.velocity.y||I.velocity.z)&&(t||(t=I.scene.position),t.add(I.velocity.clone().multiplyScalar(e)),I.move(t,a))},I.equipBow=function(){I.bowState="equipped",I.playBowAction("equipBow"),I.toggleBow(!0)},I.unequipBow=function(){I.toggleBow(!1),I.bowState="unequipped"},I.takeDamage=function(){I.scene.position.y-=20},I.equipBow(),I.moveAction("idle")});var N,V;window.innerWidth<window.innerHeight?(N=window.innerHeight,V=window.innerWidth):(N=window.innerWidth,V=window.innerHeight);var G=new o.V(75,N/V,.1,3e3);G.zoomState="out";const K=G.getFocalLength(),Q=G.getFocalLength()+4;G.position.z=5;var Z=new o.qb(0,1.5,0),$=0,_=0;G.nextPosition=function(e){if(null!=I){var n=new o.qb;return n.x=Z.x+e*Math.sin($*Math.PI/360)*Math.cos(_*Math.PI/360),n.y=Z.y+e*Math.sin(_*Math.PI/360),n.z=Z.z+e*Math.cos($*Math.PI/360)*Math.cos(_*Math.PI/360),n}},G.zoomIn=function(){G.zoomState="zooming in"},G.zoomOut=function(){G.zoomState="zooming out"},G.animate=function(e){if("zooming in"==G.zoomState)G.getFocalLength()<Q&&((n=G.getFocalLength()+60*e)<Q?G.setFocalLength(n):(G.setFocalLength(Q),G.zoomState="in"));else if("zooming out"==G.zoomState){var n;if(G.getFocalLength()>K)(n=G.getFocalLength()-60*e)>K?G.setFocalLength(n):(G.setFocalLength(K),G.zoomState="out")}},G.setPosition=function(e){G.position.copy(e)},G.updateCamera=function(){if(null!=I){var e=I.scene.position.clone().sub(G.position.clone()),n=new o.qb(-e.z,0,e.x).normalize();Z.copy(I.scene.position.clone().add(n)).setY(I.scene.position.y+1.5);var t=G.nextPosition(3.5),i=new o.db(Z,t.clone().sub(Z).normalize(),0,3.5).intersectObjects(f,!0);i.length>0&&(t=i[0].point.clone().sub(t.clone().sub(i[0].point).normalize().multiplyScalar(.1))),G.setPosition(t)}G.lookAt(Z),G.updateMatrix()},G.moveCamera=function(e,n){$-=.2*e;var t=_+.2*n;135>=t&&t>=-80&&(_=t),G.updateCamera()},t.d(n,"start",function(){return ze});var ee=new o.i;window.addEventListener("resize",function(){var e,n;e=window.innerWidth,n=window.innerHeight,se&&window.innerWidth>window.innerHeight?(se=!1,document.body.classList.remove("rotated")):se?(e=window.innerHeight,n=window.innerWidth):window.innerWidth<window.innerHeight&&(xe(),e=window.innerHeight,n=window.innerWidth);k.setSize(e,n,!1),G.aspect=e/n,G.updateProjectionMatrix()});var ne={keyboard:{forward:!1,backward:!1,left:!1,right:!1,space:!1},touch:{x:0,y:0}},te="ready",oe=!1,ie={id:null,x:null,y:null,shoot:!1},ae={id:null,x:null,y:null};const ce=4,re=document.getElementById("shoot-button");var se;function de(){requestAnimationFrame(de);var e=ee.getDelta();X(e),I&&T&&(I.animate(e,ne),T.update(e)),Object.keys(E.all()).length&&function(e){Object.keys(O).forEach(n=>{O[n].mixer&&O[n].mixer.update(e)})}(e),G.animate(e),k.render(h,G)}function le(e,n){switch(e.key){case"w":ne.keyboard.forward=n;break;case"a":ne.keyboard.left=n;break;case"s":ne.keyboard.backward=n;break;case"d":ne.keyboard.right=n;break;case" ":ne.keyboard.space=n}}function ue(e){le(e,!0)}function pe(e){le(e,!1)}function we(){"playing"===te&&I.onMouseDown()}function me(){"playing"===te&&I.onMouseUp()}function be(){"playing"!==te&&(document.body.requestPointerLock(),te="playing")}function ye(){document.pointerLockElement||(te="ready")}function ge(e){e!=oe&&(e?re.setAttribute("style","display: block;"):re.setAttribute("style","display: none;"),oe=e)}function ve(e){var n,t,o;e.preventDefault(),ge(!0);for(var i=0;i<e.targetTouches.length;i++)e.targetTouches.item(i).identifier==ie.id?n=e.targetTouches.item(i):e.targetTouches.item(i).identifier==ae.id?t=e.targetTouches.item(i):null==o&&(o=e.targetTouches.item(i));n?(se?G.moveCamera(ce*(n.pageY-ie.y),-1*ce*(n.pageX-ie.x)):G.moveCamera(ce*(n.pageX-ie.x),ce*(n.pageY-ie.y)),ie.x=n.pageX,ie.y=n.pageY):o&&("shoot-button"===o.target.id&&(I.onMouseDown(),ie.shoot=!0),(se&&o.pageY>window.innerHeight/2||!se&&o.pageX>window.innerWidth/2)&&(ie.id=o.identifier,ie.x=o.pageX,ie.y=o.pageY)),t?se?(ne.touch.y=t.pageX-ae.x,ne.touch.x=t.pageY-ae.y):(ne.touch.x=t.pageX-ae.x,ne.touch.y=-1*(t.pageY-ae.y)):o&&(se&&o.pageY<window.innerHeight/2||!se&&o.pageX<window.innerWidth/2)&&(ae.id=o.identifier,ae.x=o.pageX,ae.y=o.pageY)}function he(e){ie.id==e.changedTouches[0].identifier?(ie.shoot&&I.onMouseUp(),ie.id=null,ie.shoot=!1):ae.id==e.changedTouches[0].identifier&&(ae.id=null,ne.touch={x:0,y:0})}function fe(e){"shoot-button"!=e.target.id&&ge(!1);var n=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0;G.moveCamera(n,t)}function xe(){document.body.classList.add("rotated"),se=!0}function ze(){document.body.classList.add("playing"),document.addEventListener("mousemove",fe),document.addEventListener("keydown",ue),document.addEventListener("keyup",pe),document.addEventListener("click",be),document.addEventListener("mousedown",we),document.addEventListener("mouseup",me),document.addEventListener("pointerlockchange",ye),document.addEventListener("touchstart",ve),document.addEventListener("touchmove",ve),document.addEventListener("touchend",he),document.body.appendChild(k.domElement),window.innerWidth<window.innerHeight&&screen.orientation.type.includes("portrait")&&(document.body.requestFullscreen?document.body.requestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen?document.body.webkitRequestFullscreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen(),xe()),de()}},,function(e,n,t){e.exports=t.p+"aaa61a2e8305b0eb326a110017161ff0.glb"},,function(e,n,t){e.exports=t.p+"e0af181bc47fa11d89a008f56c4a5538.glb"},function(e,n,t){e.exports=t.p+"7892e5f13382f146373e2feee6999074.jpg"},function(e,n,t){e.exports=t.p+"bfbf6e3b2e9c92cee83c5cb73c602dff.jpg"},function(e,n,t){e.exports=t.p+"f900c2f67538e778beaa220d765ddb86.jpg"},function(e,n,t){e.exports=t.p+"dd72bb23dae86654c0018bf2164773ea.jpg"},function(e,n,t){e.exports=t.p+"40cb740f2b07e44047f4ca7823a46d21.jpg"},function(e,n,t){e.exports=t.p+"cf70fe3d246583aa691b7ff3fde1d03b.jpg"}]]);